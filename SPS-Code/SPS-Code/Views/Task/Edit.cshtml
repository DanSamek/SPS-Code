@using SPS_Code.Controllers.RequestModels;
@using SPS_Code.Data.Models;
@model TaskEditRequest
@{
    ViewData["Title"] = "Editace úlohy";

    List<UserCategory> cats = ViewBag.Categories;
}

@section Style {
    <link rel="stylesheet" href="~/css/TaskEdit.css">
}

<link rel="stylesheet" href="~/css/simplemde.min.css">
<script src="~/js/simplemde.min.js"></script>

<form action="/task/edit/@Model.Id" method="post" enctype="multipart/form-data">
    <div>
        <div>
            <label for="Name">Název úlohy</label>
            <input type="text" name="Name" value="@Model.Name" />
        </div>
        <div>
            <label for="MaxPoints">Maximální počet bodů</label>
            <input type="number" name="MaxPoints" value="@Model.MaxPoints" />
        </div>
        <div>
            <label for="TestCount">Počet testů, který vygeneruje generátor (určeno pro hodnocení)</label>
            <input type="number" name="TestCount" value="@Model.TestCount" />
        </div>
        <div>
            <label for="MaxSubmitTimeMinutes">Počet minut na odevzdání vygenerovaného vstupu</label>
            <input type="number" name="MaxSubmitTimeMinutes" value="@Model.MaxSubmitTimeMinutes" />
        </div>
        <div>
            <label for="Generator">Generátor vstupu</label>
            <input type="file" name="Generator" />
        </div>
        <div>
            <label for="Validator">Validátor uživatelského výstupu</label>
            <input type="file" name="Validator" />
        </div>
        <div>
            <label for="CategoryIDs">Přístupné kategoriím</label>
            <select multiple name="CategoryIDs">
                @foreach (var cat in cats)
                {
                    @if (Model.CategoryIDs != null && Model.CategoryIDs.Contains(cat.ID))
                    {
                        <option value="@cat.ID" selected>@cat.Name</option>
                    }
                    else
                    {
                        <option value="@cat.ID">@cat.Name</option>
                    }
                }
            </select>
        </div>
    </div>

    <label for="Description">Popis zadání</label>
    <textarea id="Description" name="Description">@Model.Description</textarea>

    <label for="Inputs">Přiklady vstupů</label><br />
    <textarea id="Inputs" name="Inputs">@Model.Inputs</textarea>

    <label for="Outputs">Příklady výstupů</label><br />
    <i>Očekává se, že budou souviset se vstupy</i>
    <textarea id="Outputs" name="Outputs">@Model.Outputs</textarea>

    <input type="submit" />
    <p style="color: red;">@Model?.Message</p>
</form>


<script>
    var simplemde = new SimpleMDE({ element: document.getElementById("Description") });
    new SimpleMDE({ element: document.getElementById("Outputs") });
    new SimpleMDE({ element: document.getElementById("Inputs") });
</script>